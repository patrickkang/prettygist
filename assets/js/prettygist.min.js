var gist_id;!function(){gist_id=window.location.search.substring(1).slice(0,-1)}(),$(document).ready(function(){marked.setOptions({highlight:function(a){return hljs.highlightAuto(a).value}}),console.log(gist_id),""===gist_id?indexPage():getGist(gist_id)});var indexPage=function(){$.ajax({url:"views/index.html",dataType:"html",success:function(a){$("#prettygist").html(a)}})},getGist=function(a){var b="https://api.github.com/gists/"+a;$.ajax({url:b,async:!1,dataType:"json",success:function(a){renderGist(a)},error:function(){renderNotFoundPage()}})},renderGist=function(a){$.ajax({url:"views/show.html",dataType:"html",success:function(b){var c,d,e;$("#prettygist").html("");for(var f in a.files);c={gist_id:a.id,title:a.description,date:a.updated_at.substring(0,10),public_or_private:a.public?"Public":"Private",gist_url:a.files[f].raw_url,content:marked(a.files[f].content)},a.owner&&(c.owner=a.owner.login,c.owner_avatar=a.owner.avatar_url,c.owner_url=a.owner.html_url),d=b,e=Mustache.to_html(d,c),$("#prettygist").append($(e))}})},renderNotFoundPage=function(){$.ajax({url:"views/error.html",dataType:"html",success:function(a){$("#prettygist").html(a)}})};